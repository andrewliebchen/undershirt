!function(a){a.isScrollToFixed=function(b){return!!a(b).data("ScrollToFixed")},a.ScrollToFixed=function(b,c){function d(){v.trigger("preUnfixed.ScrollToFixed"),k(),v.trigger("unfixed.ScrollToFixed"),z=-1,w=v.offset().top,x=v.offset().left,q.options.offsets&&(x+=v.offset().left-v.position().left),-1==y&&(y=x),r=v.css("position"),u=!0,-1!=q.options.bottom&&(v.trigger("preFixed.ScrollToFixed"),i(),v.trigger("fixed.ScrollToFixed"))}function e(){var a=q.options.limit;return a?"function"==typeof a?a.apply(v):a:0}function f(){return"fixed"===r}function g(){return"absolute"===r}function h(){return!(f()||g())}function i(){f()||(A.css({display:v.css("display"),width:v.outerWidth(!0),height:v.outerHeight(!0),"float":v.css("float")}),cssOptions={position:"fixed",top:-1==q.options.bottom?m():"",bottom:-1==q.options.bottom?"":q.options.bottom,"margin-left":"0px"},q.options.dontSetWidth||(cssOptions.width=v.width()),v.css(cssOptions),v.addClass("scroll-to-fixed-fixed"),q.options.className&&v.addClass(q.options.className),r="fixed")}function j(){var a=e(),b=x;q.options.removeOffsets&&(b=0,a-=w),cssOptions={position:"absolute",top:a,left:b,"margin-left":"0px",bottom:""},q.options.dontSetWidth||(cssOptions.width=v.width()),v.css(cssOptions),r="absolute"}function k(){h()||(z=-1,A.css("display","none"),v.css({width:"",position:s,left:"",top:t.top,"margin-left":""}),v.removeClass("scroll-to-fixed-fixed"),q.options.className&&v.removeClass(q.options.className),r=null)}function l(a){a!=z&&(v.css("left",x-a),z=a)}function m(){var a=q.options.marginTop;return a?"function"==typeof a?a.apply(v):a:0}function n(){if(a.isScrollToFixed(v)){var b=u;u||d();var c=a(window).scrollLeft(),n=a(window).scrollTop(),r=e();q.options.minWidth&&a(window).width()<q.options.minWidth?h()&&b||(p(),v.trigger("preUnfixed.ScrollToFixed"),k(),v.trigger("unfixed.ScrollToFixed")):-1==q.options.bottom?r>0&&n>=r-m()?g()&&b||(p(),v.trigger("preAbsolute.ScrollToFixed"),j(),v.trigger("unfixed.ScrollToFixed")):n>=w-m()?(f()&&b||(p(),v.trigger("preFixed.ScrollToFixed"),i(),z=-1,v.trigger("fixed.ScrollToFixed")),l(c)):h()&&b||(p(),v.trigger("preUnfixed.ScrollToFixed"),k(),v.trigger("unfixed.ScrollToFixed")):r>0?n+a(window).height()-v.outerHeight(!0)>=r-(m()||-o())?f()&&(p(),v.trigger("preUnfixed.ScrollToFixed"),"absolute"===s?j():k(),v.trigger("unfixed.ScrollToFixed")):(f()||(p(),v.trigger("preFixed.ScrollToFixed"),i()),l(c),v.trigger("fixed.ScrollToFixed")):l(c)}}function o(){return q.options.bottom?q.options.bottom:0}function p(){var a=v.css("position");"absolute"==a?v.trigger("postAbsolute.ScrollToFixed"):"fixed"==a?v.trigger("postFixed.ScrollToFixed"):v.trigger("postUnfixed.ScrollToFixed")}var q=this;q.$el=a(b),q.el=b,q.$el.data("ScrollToFixed",q);var r,s,t,u=!1,v=q.$el,w=0,x=0,y=-1,z=-1,A=null,B=function(){v.is(":visible")&&(u=!1,n())},C=function(){n()},D=function(a){a=a||window.event,a.preventDefault&&a.preventDefault(),a.returnValue=!1};q.init=function(){q.options=a.extend({},a.ScrollToFixed.defaultOptions,c),q.$el.css("z-index",q.options.zIndex),A=a("<div />"),r=v.css("position"),s=v.css("position"),t=a.extend({},v.offset()),h()&&q.$el.after(A),a(window).bind("resize.ScrollToFixed",B),a(window).bind("scroll.ScrollToFixed",C),q.options.preFixed&&v.bind("preFixed.ScrollToFixed",q.options.preFixed),q.options.postFixed&&v.bind("postFixed.ScrollToFixed",q.options.postFixed),q.options.preUnfixed&&v.bind("preUnfixed.ScrollToFixed",q.options.preUnfixed),q.options.postUnfixed&&v.bind("postUnfixed.ScrollToFixed",q.options.postUnfixed),q.options.preAbsolute&&v.bind("preAbsolute.ScrollToFixed",q.options.preAbsolute),q.options.postAbsolute&&v.bind("postAbsolute.ScrollToFixed",q.options.postAbsolute),q.options.fixed&&v.bind("fixed.ScrollToFixed",q.options.fixed),q.options.unfixed&&v.bind("unfixed.ScrollToFixed",q.options.unfixed),q.options.spacerClass&&A.addClass(q.options.spacerClass),v.bind("resize.ScrollToFixed",function(){A.height(v.height())}),v.bind("scroll.ScrollToFixed",function(){v.trigger("preUnfixed.ScrollToFixed"),k(),v.trigger("unfixed.ScrollToFixed"),n()}),v.bind("detach.ScrollToFixed",function(b){D(b),v.trigger("preUnfixed.ScrollToFixed"),k(),v.trigger("unfixed.ScrollToFixed"),a(window).unbind("resize.ScrollToFixed",B),a(window).unbind("scroll.ScrollToFixed",C),v.unbind(".ScrollToFixed"),q.$el.removeData("ScrollToFixed")}),B()},q.init()},a.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3},a.fn.scrollToFixed=function(b){return this.each(function(){new a.ScrollToFixed(this,b)})}}(jQuery),function(){$(function(){var a;return a=$(".header-main"),$(".scrolling-header").scrollToFixed({preFixed:function(){var b,c,d;return b=a.height(),d=$(".scrolling-header").height(),c=b-d,a.css({position:"fixed",top:"-"+c+"px"}),$(".nav-main").clone().appendTo(".scrolling-header")},postFixed:function(){return a.css({position:"relative",top:"0px"}),$(".scrolling-header .nav-main").remove()}})})}.call(this);